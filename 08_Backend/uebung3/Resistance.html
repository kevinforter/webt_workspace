<html>
<head>
    <meta charset="utf8"/>
    <title>Übung 3: Gesamtwiderstandsberechnung</title>
</head>
<script>
    function callPhpScript(r1, r2, wiring) {
        const url = `calculate.php?r1=${r1}&r2=${r2}&wiring=${wiring}`;

        let xhr = new XMLHttpRequest();

        // TODO: neuer HTTP-Request nach GET-Methode mit
        //       URL zu hello.json (relative URLs gehen auch) und
        //       als asynchroner Request (dritter Parameter auf true)
        xhr.open("GET", url, true);

        // TODO: Aktion beim erfolgreichem Request (onload)
        //       1. responseText (JSON) in JavaScript-Objekt einlesen
        //       2. message aus dem JavaScript-Objekte auslesen und
        //       3. in das Element mit ID "message" einsetzen (innerHTML).
        xhr.onload = function() {
            let obj = JSON.parse(xhr.responseText);

            return obj.message;
        }

        // Fehlerbehandlung (onerror / ontimeout): jeweils alert() mit entsprechender Info
        xhr.onerror   = function() { alert("Fehler beim Abfragen der Mitteilung"); }
        xhr.ontimeout = function() { alert("Zeitüberschreitung beim Abfragen der Mitteilung"); }

        // TODO: Request absenden
        xhr.send();
    }
</script>
<body>
<p>Die Ausgabe erfolgt im Console-Log: F12</p>
<script>
    // TODO: call calculateResistance with own example values
    let r1 = 100;
    let r2 = 50;
    let wiring = 'serial';
    let result = callPhpScript(r1, r2, wiring);

    // TODO: output result using console.log
    console.log(result);
</script>
</body>

</html>